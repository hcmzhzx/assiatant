<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>上传信息</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/index.css">
</head>
<body>
<form id="video-up" class="flexitemv wrap" enctype="multipart/form-data">
    <div class="flexitemv custombox">
        <div class="around upload">
            <div class="up-btn z-up">
                <input type="file" class="file" accept="video/mp4,video/avi"/>
            </div>
            <div class="c-text">上传视频，支持MP4、AVI格式，单个视频不可超过2G。</div>
        </div>
        <div class="flexv claimbox">
            <textarea class="flex claim" placeholder="请输入您需要的文案内容，请尽量详细。"></textarea>
            <textarea class="flex claim" placeholder="写下您的要求，我们会尽量满足您哦。"></textarea>
        </div>
    </div>
    <div class="flex center submit">
        <a href="javascript:;" class="flex center s-btn">确认提交</a>
    </div>
</form>
</body>
<script src="../js/icon.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="../js/functions.js"></script>
<script type="text/javascript">
    $(function () {
        /*点击的文本框*/
        $(".file").change(function() {//存放视频的父亲元素
            let videoContainer = $(this).parents(".upload"),file = document.querySelector('.file').files[0],delParent; //获取的视频文件
            let fileSize = 1024 * 1024 * 1024 * 2;
            if(file.size <= fileSize){
                $('.z-up').hide();
                let v_box = $(`<div class="z-up videobox"><img src="${'../image/user.jpg'}" class="fitimg"></div>`);
                videoContainer.prepend(v_box);
                // 删除
                let $del = $('<i class="flex center del close-upimg"><svg class="zs" aria-hidden="true"><use xlink:href="#del"></use></svg></i>').on("click",function(event){
                    event.preventDefault();
                    event.stopPropagation();
                    delParent = $(this).parent();
                    delParent.parent().find(".up-btn").show();
                    delParent.remove();
                });
                $del.appendTo(v_box);
            } else {
                alert('文件大小过大');
            }
        });

        // 定制成功页面
        $('.submit .s-btn').click(function(){
            $('#video-up').remove();
            customSuccess('../image/win.jpg','我们将在8小时内完成您的作品，请您耐心等待（特殊时间如节假日定制过多，也许会消耗一些时间。）','my_modu.html');
        });
    });
</script>
</html>